{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\video\\\\Desktop\\\\PythonProject1\\\\my-chat-app\\\\src\\\\ChatBox.tsx\";\nimport React, { useEffect, useState } from 'react';\nimport { io } from 'socket.io-client';\nimport axios from 'axios';\nconst socket = io('http://localhost:3001'); // Porta NestJS WebSocket\n\nconst ChatBox = () => {\n  const [sender, setSender] = useState('');\n  const [text, setText] = useState('');\n  const [messages, setMessages] = useState([]);\n  useEffect(() => {\n    socket.on('message', message => {\n      setMessages(prev => [...prev, message]);\n    });\n    return () => {\n      socket.off('message');\n    };\n  }, []);\n  const sendMessage = async () => {\n    if (!sender.trim() || !text.trim()) return;\n    const userMsg = {\n      sender,\n      text,\n      isGenerated: false\n    };\n\n    // Invia il messaggio agli altri tramite WebSocket\n    socket.emit('message', userMsg);\n\n    // Chiedi risposta AI via FastAPI\n    try {\n      const loadingMsg = {\n        sender: 'AI',\n        text: 'Sta scrivendo...',\n        isGenerated: true\n      };\n      setMessages(prev => [...prev, loadingMsg]);\n      const response = await axios.post('http://localhost:8000/ai', {\n        message: text\n      });\n      const aiMsg = {\n        sender: 'AI',\n        text: response.data.response,\n        isGenerated: true\n      };\n      setMessages(prev => [...prev.filter(m => m !== loadingMsg), aiMsg]);\n    } catch (err) {\n      console.error('Errore FastAPI:', err);\n    }\n    setText('');\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }, \"Chat Realtime + AI\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    value: sender,\n    onChange: e => setSender(e.target.value),\n    placeholder: \"Your name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    value: text,\n    onChange: e => setText(e.target.value),\n    onKeyDown: e => e.key === 'Enter' && sendMessage(),\n    placeholder: \"Message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: sendMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, \"Send\")), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, messages.map((msg, i) => /*#__PURE__*/React.createElement(\"li\", {\n    key: i,\n    className: msg.isGenerated ? 'ai' : 'user',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"message-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"avatar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 15\n    }\n  }, msg.isGenerated ? 'ðŸ¤–' : 'ðŸ‘¤'), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bubble\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }, msg.sender, \":\"), \" \", msg.text))))));\n};\nexport default ChatBox;","map":{"version":3,"names":["React","useEffect","useState","io","axios","socket","ChatBox","sender","setSender","text","setText","messages","setMessages","on","message","prev","off","sendMessage","trim","userMsg","isGenerated","emit","loadingMsg","response","post","aiMsg","data","filter","m","err","console","error","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","placeholder","onKeyDown","key","onClick","map","msg","i"],"sources":["C:/Users/video/Desktop/PythonProject1/my-chat-app/src/ChatBox.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { io, Socket } from 'socket.io-client';\r\nimport axios from 'axios';\r\nimport { Message } from './types';\r\n\r\nconst socket: Socket = io('http://localhost:3001'); // Porta NestJS WebSocket\r\n\r\nconst ChatBox: React.FC = () => {\r\n  const [sender, setSender] = useState('');\r\n  const [text, setText] = useState('');\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n\r\n  useEffect(() => {\r\n    socket.on('message', (message: Message) => {\r\n      setMessages((prev) => [...prev, message]);\r\n    });\r\n\r\n    return () => {\r\n      socket.off('message');\r\n    };\r\n  }, []);\r\n\r\n  const sendMessage = async () => {\r\n    if (!sender.trim() || !text.trim()) return;\r\n\r\n    const userMsg: Message = {\r\n      sender,\r\n      text,\r\n      isGenerated: false,\r\n    };\r\n\r\n    // Invia il messaggio agli altri tramite WebSocket\r\n    socket.emit('message', userMsg);\r\n\r\n    // Chiedi risposta AI via FastAPI\r\n    try {\r\n      const loadingMsg: Message = {\r\n        sender: 'AI',\r\n        text: 'Sta scrivendo...',\r\n        isGenerated: true,\r\n      };\r\n\r\n      setMessages((prev) => [...prev, loadingMsg]);\r\n\r\n      const response = await axios.post('http://localhost:8000/ai', {\r\n        message: text,\r\n      });\r\n\r\n      const aiMsg: Message = {\r\n        sender: 'AI',\r\n        text: response.data.response,\r\n        isGenerated: true,\r\n      };\r\n\r\n      setMessages((prev) =>\r\n        [...prev.filter((m) => m !== loadingMsg), aiMsg]\r\n      );\r\n    } catch (err) {\r\n      console.error('Errore FastAPI:', err);\r\n    }\r\n\r\n    setText('');\r\n  };\r\n\r\n  return (\r\n    <div className=\"chat-container\">\r\n      <h1>Chat Realtime + AI</h1>\r\n      <div className=\"input-group\">\r\n        <input\r\n          value={sender}\r\n          onChange={(e) => setSender(e.target.value)}\r\n          placeholder=\"Your name\"\r\n        />\r\n        <input\r\n          value={text}\r\n          onChange={(e) => setText(e.target.value)}\r\n          onKeyDown={(e) => e.key === 'Enter' && sendMessage()}\r\n          placeholder=\"Message\"\r\n        />\r\n        <button onClick={sendMessage}>Send</button>\r\n      </div>\r\n\r\n      <ul>\r\n        {messages.map((msg, i) => (\r\n          <li key={i} className={msg.isGenerated ? 'ai' : 'user'}>\r\n            <div className=\"message-row\">\r\n              <span className=\"avatar\">{msg.isGenerated ? 'ðŸ¤–' : 'ðŸ‘¤'}</span>\r\n              <div className=\"bubble\">\r\n                <strong>{msg.sender}:</strong> {msg.text}\r\n              </div>\r\n            </div>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatBox;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}